{"ast":null,"code":"import \"core-js/modules/es.number.constructor.js\";\nimport \"core-js/modules/es.date.now.js\";\nimport \"core-js/modules/es.date.to-string.js\";\nimport \"core-js/modules/web.timers.js\";\nimport { defineComponent, toRefs, ref, watch, onMounted, onBeforeUnmount, openBlock, createElementBlock, normalizeClass, renderSlot, createTextVNode, toDisplayString, createCommentVNode, createElementVNode, normalizeStyle } from \"vue\";\nimport originDayjs from \"dayjs\";\nimport { getPrefixCls } from \"../_utils/global-config.js\";\nimport { getDateString } from \"./utils.js\";\nimport _export_sfc from \"../_virtual/plugin-vue_export-helper.js\";\nvar _sfc_main = defineComponent({\n  name: \"Countdown\",\n  props: {\n    title: String,\n    value: {\n      type: Number,\n      \"default\": function _default() {\n        return Date.now() + 3e5;\n      }\n    },\n    now: {\n      type: Number,\n      \"default\": function _default() {\n        return Date.now();\n      }\n    },\n    format: {\n      type: String,\n      \"default\": \"HH:mm:ss\"\n    },\n    start: {\n      type: Boolean,\n      \"default\": true\n    },\n    valueStyle: {\n      type: Object\n    }\n  },\n  emits: {\n    finish: function finish() {\n      return true;\n    }\n  },\n  setup: function setup(props, _ref) {\n    var emit = _ref.emit;\n    var prefixCls = getPrefixCls(\"statistic\");\n    var _toRefs = toRefs(props),\n      start = _toRefs.start,\n      value = _toRefs.value,\n      now = _toRefs.now,\n      format = _toRefs.format;\n    var displayValue = ref(getDateString(Math.max(originDayjs(props.value).diff(originDayjs(props.now), \"millisecond\"), 0), props.format));\n    watch([value, now, format], function () {\n      var _value = getDateString(Math.max(originDayjs(props.value).diff(originDayjs(props.now), \"millisecond\"), 0), props.format);\n      if (_value !== displayValue.value) {\n        displayValue.value = _value;\n      }\n    });\n    var timer = ref(0);\n    var stopTimer = function stopTimer() {\n      if (timer.value) {\n        window.clearInterval(timer.value);\n        timer.value = 0;\n      }\n    };\n    var startTimer = function startTimer() {\n      if (originDayjs(props.value).valueOf() < Date.now()) {\n        return;\n      }\n      timer.value = window.setInterval(function () {\n        var _value = originDayjs(props.value).diff(originDayjs(), \"millisecond\");\n        if (_value <= 0) {\n          stopTimer();\n          emit(\"finish\");\n        }\n        displayValue.value = getDateString(Math.max(_value, 0), props.format);\n      }, 1e3 / 30);\n    };\n    onMounted(function () {\n      if (props.start) {\n        startTimer();\n      }\n    });\n    onBeforeUnmount(function () {\n      stopTimer();\n    });\n    watch(start, function (value2) {\n      if (value2 && !timer.value) {\n        startTimer();\n      }\n    });\n    return {\n      prefixCls: prefixCls,\n      displayValue: displayValue\n    };\n  }\n});\nfunction _sfc_render(_ctx, _cache, $props, $setup, $data, $options) {\n  return openBlock(), createElementBlock(\"div\", {\n    \"class\": normalizeClass([\"\".concat(_ctx.prefixCls), \"\".concat(_ctx.prefixCls, \"-countdown\")])\n  }, [_ctx.title || _ctx.$slots.title ? (openBlock(), createElementBlock(\"div\", {\n    key: 0,\n    \"class\": normalizeClass(\"\".concat(_ctx.prefixCls, \"-title\"))\n  }, [renderSlot(_ctx.$slots, \"title\", {}, function () {\n    return [createTextVNode(toDisplayString(_ctx.title), 1)];\n  })], 2)) : createCommentVNode(\"v-if\", true), createElementVNode(\"div\", {\n    \"class\": normalizeClass(\"\".concat(_ctx.prefixCls, \"-content\"))\n  }, [createElementVNode(\"div\", {\n    \"class\": normalizeClass(\"\".concat(_ctx.prefixCls, \"-value\")),\n    style: normalizeStyle(_ctx.valueStyle)\n  }, toDisplayString(_ctx.displayValue), 7)], 2)], 2);\n}\nvar Countdown = /* @__PURE__ */_export_sfc(_sfc_main, [[\"render\", _sfc_render]]);\nexport { Countdown as default };","map":{"version":3,"names":["defineComponent","toRefs","ref","watch","onMounted","onBeforeUnmount","openBlock","createElementBlock","normalizeClass","renderSlot","createTextVNode","toDisplayString","createCommentVNode","createElementVNode","normalizeStyle","originDayjs","getPrefixCls","getDateString","_export_sfc","_sfc_main","name","props","title","String","value","type","Number","_default","Date","now","format","start","Boolean","valueStyle","Object","emits","finish","setup","_ref","emit","prefixCls","_toRefs","displayValue","Math","max","diff","_value","timer","stopTimer","window","clearInterval","startTimer","valueOf","setInterval","value2","_sfc_render","_ctx","_cache","$props","$setup","$data","$options","concat","$slots","key","style","Countdown","default"],"sources":["/root/FrontPlatform/vue-front/node_modules/@arco-design/web-vue/es/statistic/countdown.js"],"sourcesContent":["import { defineComponent, toRefs, ref, watch, onMounted, onBeforeUnmount, openBlock, createElementBlock, normalizeClass, renderSlot, createTextVNode, toDisplayString, createCommentVNode, createElementVNode, normalizeStyle } from \"vue\";\nimport originDayjs from \"dayjs\";\nimport { getPrefixCls } from \"../_utils/global-config.js\";\nimport { getDateString } from \"./utils.js\";\nimport _export_sfc from \"../_virtual/plugin-vue_export-helper.js\";\nconst _sfc_main = defineComponent({\n  name: \"Countdown\",\n  props: {\n    title: String,\n    value: {\n      type: Number,\n      default: () => Date.now() + 3e5\n    },\n    now: {\n      type: Number,\n      default: () => Date.now()\n    },\n    format: {\n      type: String,\n      default: \"HH:mm:ss\"\n    },\n    start: {\n      type: Boolean,\n      default: true\n    },\n    valueStyle: {\n      type: Object\n    }\n  },\n  emits: {\n    finish: () => true\n  },\n  setup(props, { emit }) {\n    const prefixCls = getPrefixCls(\"statistic\");\n    const { start, value, now, format } = toRefs(props);\n    const displayValue = ref(getDateString(Math.max(originDayjs(props.value).diff(originDayjs(props.now), \"millisecond\"), 0), props.format));\n    watch([value, now, format], () => {\n      const _value = getDateString(Math.max(originDayjs(props.value).diff(originDayjs(props.now), \"millisecond\"), 0), props.format);\n      if (_value !== displayValue.value) {\n        displayValue.value = _value;\n      }\n    });\n    const timer = ref(0);\n    const stopTimer = () => {\n      if (timer.value) {\n        window.clearInterval(timer.value);\n        timer.value = 0;\n      }\n    };\n    const startTimer = () => {\n      if (originDayjs(props.value).valueOf() < Date.now()) {\n        return;\n      }\n      timer.value = window.setInterval(() => {\n        const _value = originDayjs(props.value).diff(originDayjs(), \"millisecond\");\n        if (_value <= 0) {\n          stopTimer();\n          emit(\"finish\");\n        }\n        displayValue.value = getDateString(Math.max(_value, 0), props.format);\n      }, 1e3 / 30);\n    };\n    onMounted(() => {\n      if (props.start) {\n        startTimer();\n      }\n    });\n    onBeforeUnmount(() => {\n      stopTimer();\n    });\n    watch(start, (value2) => {\n      if (value2 && !timer.value) {\n        startTimer();\n      }\n    });\n    return {\n      prefixCls,\n      displayValue\n    };\n  }\n});\nfunction _sfc_render(_ctx, _cache, $props, $setup, $data, $options) {\n  return openBlock(), createElementBlock(\"div\", {\n    class: normalizeClass([`${_ctx.prefixCls}`, `${_ctx.prefixCls}-countdown`])\n  }, [\n    _ctx.title || _ctx.$slots.title ? (openBlock(), createElementBlock(\"div\", {\n      key: 0,\n      class: normalizeClass(`${_ctx.prefixCls}-title`)\n    }, [\n      renderSlot(_ctx.$slots, \"title\", {}, () => [\n        createTextVNode(toDisplayString(_ctx.title), 1)\n      ])\n    ], 2)) : createCommentVNode(\"v-if\", true),\n    createElementVNode(\"div\", {\n      class: normalizeClass(`${_ctx.prefixCls}-content`)\n    }, [\n      createElementVNode(\"div\", {\n        class: normalizeClass(`${_ctx.prefixCls}-value`),\n        style: normalizeStyle(_ctx.valueStyle)\n      }, toDisplayString(_ctx.displayValue), 7)\n    ], 2)\n  ], 2);\n}\nvar Countdown = /* @__PURE__ */ _export_sfc(_sfc_main, [[\"render\", _sfc_render]]);\nexport { Countdown as default };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}