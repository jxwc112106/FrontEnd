{"ast":null,"code":"import _createForOfIteratorHelper from \"/root/FrontPlatform/vue-front/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport { ref, watch, computed } from \"vue\";\nimport { isString } from \"../../_utils/is.js\";\nimport { isEqual } from \"../../_utils/is-equal.js\";\nvar useSorter = function useSorter(_ref) {\n  var columns = _ref.columns,\n    onSorterChange = _ref.onSorterChange;\n  var _sorter = ref(getDefaultSorter(columns.value));\n  watch(columns, function (columns2) {\n    var newSorter = getDefaultSorter(columns2);\n    if (!isEqual(newSorter, _sorter.value)) {\n      _sorter.value = newSorter;\n    }\n  });\n  var computedSorter = computed(function () {\n    var _a;\n    var _iterator = _createForOfIteratorHelper(columns.value),\n      _step;\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var item = _step.value;\n        if (item.dataIndex && item.sortable) {\n          var direction = isString(item.sortable.sortOrder) ? item.sortable.sortOrder : ((_a = _sorter.value) == null ? void 0 : _a.field) === item.dataIndex ? _sorter.value.direction : \"\";\n          if (direction) {\n            return {\n              field: item.dataIndex,\n              direction: direction\n            };\n          }\n        }\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n    return void 0;\n  });\n  var resetSorters = function resetSorters() {\n    var _a;\n    var sorter;\n    var _iterator2 = _createForOfIteratorHelper(columns.value),\n      _step2;\n    try {\n      for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n        var item = _step2.value;\n        if (item.dataIndex && item.sortable) {\n          if (!sorter && item.sortable.defaultSortOrder) {\n            sorter = {\n              field: item.dataIndex,\n              direction: item.sortable.defaultSortOrder\n            };\n          }\n          onSorterChange(item.dataIndex, (_a = item.sortable.defaultSortOrder) != null ? _a : \"\");\n        }\n      }\n    } catch (err) {\n      _iterator2.e(err);\n    } finally {\n      _iterator2.f();\n    }\n    _sorter.value = sorter;\n  };\n  var clearSorters = function clearSorters() {\n    var _iterator3 = _createForOfIteratorHelper(columns.value),\n      _step3;\n    try {\n      for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n        var item = _step3.value;\n        if (item.dataIndex && item.sortable) {\n          onSorterChange(item.dataIndex, \"\");\n        }\n      }\n    } catch (err) {\n      _iterator3.e(err);\n    } finally {\n      _iterator3.f();\n    }\n  };\n  return {\n    _sorter: _sorter,\n    computedSorter: computedSorter,\n    resetSorters: resetSorters,\n    clearSorters: clearSorters\n  };\n};\nvar getDefaultSorter = function getDefaultSorter(columns) {\n  var _a;\n  var _iterator4 = _createForOfIteratorHelper(columns),\n    _step4;\n  try {\n    for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n      var item = _step4.value;\n      if (item.dataIndex && ((_a = item.sortable) == null ? void 0 : _a.defaultSortOrder)) {\n        return {\n          field: item.dataIndex,\n          direction: item.sortable.defaultSortOrder\n        };\n      }\n    }\n  } catch (err) {\n    _iterator4.e(err);\n  } finally {\n    _iterator4.f();\n  }\n  return void 0;\n};\nexport { useSorter };","map":{"version":3,"names":["ref","watch","computed","isString","isEqual","useSorter","_ref","columns","onSorterChange","_sorter","getDefaultSorter","value","columns2","newSorter","computedSorter","_a","_iterator","_createForOfIteratorHelper","_step","s","n","done","item","dataIndex","sortable","direction","sortOrder","field","err","e","f","resetSorters","sorter","_iterator2","_step2","defaultSortOrder","clearSorters","_iterator3","_step3","_iterator4","_step4"],"sources":["/root/FrontPlatform/vue-front/node_modules/@arco-design/web-vue/es/table/hooks/use-sorter.js"],"sourcesContent":["import { ref, watch, computed } from \"vue\";\nimport { isString } from \"../../_utils/is.js\";\nimport { isEqual } from \"../../_utils/is-equal.js\";\nconst useSorter = ({\n  columns,\n  onSorterChange\n}) => {\n  const _sorter = ref(getDefaultSorter(columns.value));\n  watch(columns, (columns2) => {\n    const newSorter = getDefaultSorter(columns2);\n    if (!isEqual(newSorter, _sorter.value)) {\n      _sorter.value = newSorter;\n    }\n  });\n  const computedSorter = computed(() => {\n    var _a;\n    for (const item of columns.value) {\n      if (item.dataIndex && item.sortable) {\n        const direction = isString(item.sortable.sortOrder) ? item.sortable.sortOrder : ((_a = _sorter.value) == null ? void 0 : _a.field) === item.dataIndex ? _sorter.value.direction : \"\";\n        if (direction) {\n          return {\n            field: item.dataIndex,\n            direction\n          };\n        }\n      }\n    }\n    return void 0;\n  });\n  const resetSorters = () => {\n    var _a;\n    let sorter;\n    for (const item of columns.value) {\n      if (item.dataIndex && item.sortable) {\n        if (!sorter && item.sortable.defaultSortOrder) {\n          sorter = {\n            field: item.dataIndex,\n            direction: item.sortable.defaultSortOrder\n          };\n        }\n        onSorterChange(item.dataIndex, (_a = item.sortable.defaultSortOrder) != null ? _a : \"\");\n      }\n    }\n    _sorter.value = sorter;\n  };\n  const clearSorters = () => {\n    for (const item of columns.value) {\n      if (item.dataIndex && item.sortable) {\n        onSorterChange(item.dataIndex, \"\");\n      }\n    }\n  };\n  return {\n    _sorter,\n    computedSorter,\n    resetSorters,\n    clearSorters\n  };\n};\nconst getDefaultSorter = (columns) => {\n  var _a;\n  for (const item of columns) {\n    if (item.dataIndex && ((_a = item.sortable) == null ? void 0 : _a.defaultSortOrder)) {\n      return {\n        field: item.dataIndex,\n        direction: item.sortable.defaultSortOrder\n      };\n    }\n  }\n  return void 0;\n};\nexport { useSorter };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}