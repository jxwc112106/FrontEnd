{"ast":null,"code":"import _toConsumableArray from \"/root/FrontPlatform/vue-front/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.error.to-string.js\";\nimport \"core-js/modules/es.date.to-string.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.regexp.to-string.js\";\nimport \"core-js/modules/es.array.slice.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.set.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.string.includes.js\";\nimport \"core-js/modules/es.array.index-of.js\";\nimport { toRefs, ref, watch, onMounted, computed } from \"vue\";\nimport { isUndefined } from \"../../_utils/is.js\";\nfunction getPath(data, key) {\n  var path = [];\n  var loop = function loop(list) {\n    for (var i = 0; i < list.length; i++) {\n      var item = list[i];\n      if (item.key === key) {\n        return true;\n      }\n      if (item.children) {\n        path.push(item.key);\n        var matched = loop(item.children);\n        if (matched) {\n          return true;\n        }\n        path.pop();\n      }\n    }\n    return false;\n  };\n  loop(data);\n  return path;\n}\nfunction isSameKeys(keys1, keys2) {\n  if (keys1.length !== keys2.length) return false;\n  return keys1.toString() === keys2.toString();\n}\nfunction useMenuOpenState(props) {\n  var _toRefs = toRefs(props),\n    modelValue = _toRefs.modelValue,\n    defaultValue = _toRefs.defaultValue,\n    autoOpen = _toRefs.autoOpen,\n    autoOpenSelected = _toRefs.autoOpenSelected,\n    subMenuKeys = _toRefs.subMenuKeys,\n    selectedKeys = _toRefs.selectedKeys,\n    menuData = _toRefs.menuData,\n    accordion = _toRefs.accordion;\n  var localValue = ref(!isUndefined(modelValue.value) ? modelValue.value : !isUndefined(defaultValue.value) ? defaultValue.value : []);\n  var setLocalValue = function setLocalValue(val) {\n    localValue.value = val;\n  };\n  watch(modelValue, function () {\n    if (isUndefined(modelValue.value)) {\n      setLocalValue([]);\n    }\n  });\n  var mountedSubMenuKeys = [];\n  onMounted(function () {\n    mountedSubMenuKeys = _toConsumableArray(subMenuKeys.value);\n    var newOpenKeys = [];\n    if (autoOpen.value) {\n      newOpenKeys = accordion.value ? subMenuKeys.value.slice(0, 1) : _toConsumableArray(subMenuKeys.value);\n    }\n    if (autoOpenSelected.value) {\n      var pathList = selectedKeys.value.map(function (key) {\n        return getPath(menuData.value, key);\n      });\n      if (pathList.length && (!autoOpen.value || accordion.value)) {\n        var _ref;\n        newOpenKeys = accordion.value ? pathList[0] : _toConsumableArray(new Set((_ref = []).concat.apply(_ref, _toConsumableArray(pathList))));\n      }\n    }\n    if (newOpenKeys.length) {\n      setLocalValue(newOpenKeys);\n    }\n  });\n  var hasTriggered = false;\n  watch(subMenuKeys, function (currentKeys) {\n    var prevKeys = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n    if (hasTriggered || !isSameKeys(currentKeys, mountedSubMenuKeys)) {\n      var newOpenKeys = openKeys.value.filter(function (key) {\n        return currentKeys.includes(key);\n      });\n      if (autoOpen.value) {\n        var keysAdded = currentKeys.filter(function (key) {\n          return !prevKeys.includes(key);\n        });\n        newOpenKeys.push.apply(newOpenKeys, _toConsumableArray(keysAdded));\n      }\n      setLocalValue(accordion.value ? newOpenKeys.slice(0, 1) : newOpenKeys);\n    }\n    hasTriggered = true;\n  });\n  var openKeys = computed(function () {\n    return modelValue.value || localValue.value;\n  });\n  return {\n    openKeys: openKeys,\n    localOpenKeys: localValue,\n    setOpenKeys: setLocalValue,\n    open: function open(key, level) {\n      var newOpenKeys = [];\n      if (openKeys.value.indexOf(key) > -1) {\n        if (accordion.value && level === 1) {\n          newOpenKeys = [];\n        } else {\n          newOpenKeys = openKeys.value.filter(function (i) {\n            return i !== key;\n          });\n        }\n      } else if (accordion.value && level === 1) {\n        newOpenKeys = [key];\n      } else {\n        newOpenKeys = openKeys.value.concat([key]);\n      }\n      setLocalValue(newOpenKeys);\n      return newOpenKeys;\n    }\n  };\n}\nexport { useMenuOpenState as default };","map":{"version":3,"names":["toRefs","ref","watch","onMounted","computed","isUndefined","getPath","data","key","path","loop","list","i","length","item","children","push","matched","pop","isSameKeys","keys1","keys2","toString","useMenuOpenState","props","_toRefs","modelValue","defaultValue","autoOpen","autoOpenSelected","subMenuKeys","selectedKeys","menuData","accordion","localValue","value","setLocalValue","val","mountedSubMenuKeys","_toConsumableArray","newOpenKeys","slice","pathList","map","_ref","Set","concat","apply","hasTriggered","currentKeys","prevKeys","arguments","undefined","openKeys","filter","includes","keysAdded","localOpenKeys","setOpenKeys","open","level","indexOf","default"],"sources":["/root/FrontPlatform/vue-front/node_modules/@arco-design/web-vue/es/menu/hooks/use-menu-open-state.js"],"sourcesContent":["import { toRefs, ref, watch, onMounted, computed } from \"vue\";\nimport { isUndefined } from \"../../_utils/is.js\";\nfunction getPath(data, key) {\n  const path = [];\n  const loop = (list) => {\n    for (let i = 0; i < list.length; i++) {\n      const item = list[i];\n      if (item.key === key) {\n        return true;\n      }\n      if (item.children) {\n        path.push(item.key);\n        const matched = loop(item.children);\n        if (matched) {\n          return true;\n        }\n        path.pop();\n      }\n    }\n    return false;\n  };\n  loop(data);\n  return path;\n}\nfunction isSameKeys(keys1, keys2) {\n  if (keys1.length !== keys2.length)\n    return false;\n  return keys1.toString() === keys2.toString();\n}\nfunction useMenuOpenState(props) {\n  const {\n    modelValue,\n    defaultValue,\n    autoOpen,\n    autoOpenSelected,\n    subMenuKeys,\n    selectedKeys,\n    menuData,\n    accordion\n  } = toRefs(props);\n  const localValue = ref(!isUndefined(modelValue.value) ? modelValue.value : !isUndefined(defaultValue.value) ? defaultValue.value : []);\n  const setLocalValue = (val) => {\n    localValue.value = val;\n  };\n  watch(modelValue, () => {\n    if (isUndefined(modelValue.value)) {\n      setLocalValue([]);\n    }\n  });\n  let mountedSubMenuKeys = [];\n  onMounted(() => {\n    mountedSubMenuKeys = [...subMenuKeys.value];\n    let newOpenKeys = [];\n    if (autoOpen.value) {\n      newOpenKeys = accordion.value ? subMenuKeys.value.slice(0, 1) : [...subMenuKeys.value];\n    }\n    if (autoOpenSelected.value) {\n      const pathList = selectedKeys.value.map((key) => getPath(menuData.value, key));\n      if (pathList.length && (!autoOpen.value || accordion.value)) {\n        newOpenKeys = accordion.value ? pathList[0] : [...new Set([].concat(...pathList))];\n      }\n    }\n    if (newOpenKeys.length) {\n      setLocalValue(newOpenKeys);\n    }\n  });\n  let hasTriggered = false;\n  watch(subMenuKeys, (currentKeys, prevKeys = []) => {\n    if (hasTriggered || !isSameKeys(currentKeys, mountedSubMenuKeys)) {\n      const newOpenKeys = openKeys.value.filter((key) => currentKeys.includes(key));\n      if (autoOpen.value) {\n        const keysAdded = currentKeys.filter((key) => !prevKeys.includes(key));\n        newOpenKeys.push(...keysAdded);\n      }\n      setLocalValue(accordion.value ? newOpenKeys.slice(0, 1) : newOpenKeys);\n    }\n    hasTriggered = true;\n  });\n  const openKeys = computed(() => modelValue.value || localValue.value);\n  return {\n    openKeys,\n    localOpenKeys: localValue,\n    setOpenKeys: setLocalValue,\n    open(key, level) {\n      let newOpenKeys = [];\n      if (openKeys.value.indexOf(key) > -1) {\n        if (accordion.value && level === 1) {\n          newOpenKeys = [];\n        } else {\n          newOpenKeys = openKeys.value.filter((i) => i !== key);\n        }\n      } else if (accordion.value && level === 1) {\n        newOpenKeys = [key];\n      } else {\n        newOpenKeys = openKeys.value.concat([key]);\n      }\n      setLocalValue(newOpenKeys);\n      return newOpenKeys;\n    }\n  };\n}\nexport { useMenuOpenState as default };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}