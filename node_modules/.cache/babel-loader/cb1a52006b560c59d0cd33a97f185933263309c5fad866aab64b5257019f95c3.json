{"ast":null,"code":"import { ref } from \"vue\";\nimport { on, off } from \"../../_utils/dom.js\";\nvar useDraggable = function useDraggable(_ref) {\n  var modalRef = _ref.modalRef,\n    wrapperRef = _ref.wrapperRef,\n    draggable = _ref.draggable;\n  var isDragging = ref(false);\n  var startMouse = ref([0, 0]);\n  var diffMouse = ref([0, 0]);\n  var initialPosition = ref([0, 0]);\n  var position = ref();\n  var maxPosition = ref([0, 0]);\n  var getInitialPosition = function getInitialPosition() {\n    var _a, _b;\n    if (wrapperRef.value && modalRef.value) {\n      var _wrapperRef$value$get = wrapperRef.value.getBoundingClientRect(),\n        wrapperTop = _wrapperRef$value$get.top,\n        wrapperLeft = _wrapperRef$value$get.left;\n      var _wrapperRef$value = wrapperRef.value,\n        wrapperWidth = _wrapperRef$value.clientWidth,\n        wrapperHeight = _wrapperRef$value.clientHeight;\n      var _modalRef$value$getBo = modalRef.value.getBoundingClientRect(),\n        top = _modalRef$value$getBo.top,\n        left = _modalRef$value$getBo.left,\n        width = _modalRef$value$getBo.width,\n        height = _modalRef$value$getBo.height;\n      var initialX = left - wrapperLeft;\n      var initialY = top - wrapperTop;\n      if (initialX !== ((_a = initialPosition.value) == null ? void 0 : _a[0]) || initialY !== ((_b = initialPosition.value) == null ? void 0 : _b[1])) {\n        initialPosition.value = [initialX, initialY];\n      }\n      var maxX = wrapperWidth > width ? wrapperWidth - width : 0;\n      var maxY = wrapperHeight > height ? wrapperHeight - height : 0;\n      if (maxX !== maxPosition.value[0] || maxY !== maxPosition.value[1]) {\n        maxPosition.value = [maxX, maxY];\n      }\n    }\n  };\n  var handleMoveDown = function handleMoveDown(ev) {\n    if (draggable.value) {\n      ev.preventDefault();\n      isDragging.value = true;\n      getInitialPosition();\n      startMouse.value = [ev.x, ev.y];\n      diffMouse.value = [0, 0];\n      on(window, \"mousemove\", handleMouseMove);\n      on(window, \"mouseup\", handleMouseUp);\n      on(window, \"contextmenu\", handleMouseUp);\n    }\n  };\n  var handleMouseMove = function handleMouseMove(ev) {\n    if (isDragging.value) {\n      var diffX = ev.x - startMouse.value[0];\n      var diffY = ev.y - startMouse.value[1];\n      var x = initialPosition.value[0] + diffX;\n      var y = initialPosition.value[1] + diffY;\n      if (x < 0) x = 0;\n      if (x > maxPosition.value[0]) x = maxPosition.value[0];\n      if (y < 0) y = 0;\n      if (y > maxPosition.value[1]) y = maxPosition.value[1];\n      position.value = [x, y];\n    }\n  };\n  var handleMouseUp = function handleMouseUp() {\n    isDragging.value = false;\n    off(window, \"mousemove\", handleMouseMove);\n    off(window, \"mouseup\", handleMouseUp);\n  };\n  return {\n    position: position,\n    handleMoveDown: handleMoveDown\n  };\n};\nexport { useDraggable };","map":{"version":3,"names":["ref","on","off","useDraggable","_ref","modalRef","wrapperRef","draggable","isDragging","startMouse","diffMouse","initialPosition","position","maxPosition","getInitialPosition","_a","_b","value","_wrapperRef$value$get","getBoundingClientRect","wrapperTop","top","wrapperLeft","left","_wrapperRef$value","wrapperWidth","clientWidth","wrapperHeight","clientHeight","_modalRef$value$getBo","width","height","initialX","initialY","maxX","maxY","handleMoveDown","ev","preventDefault","x","y","window","handleMouseMove","handleMouseUp","diffX","diffY"],"sources":["/root/FrontPlatform/vue-front/node_modules/@arco-design/web-vue/es/modal/hooks/use-draggable.js"],"sourcesContent":["import { ref } from \"vue\";\nimport { on, off } from \"../../_utils/dom.js\";\nconst useDraggable = ({\n  modalRef,\n  wrapperRef,\n  draggable\n}) => {\n  const isDragging = ref(false);\n  const startMouse = ref([0, 0]);\n  const diffMouse = ref([0, 0]);\n  const initialPosition = ref([0, 0]);\n  const position = ref();\n  const maxPosition = ref([0, 0]);\n  const getInitialPosition = () => {\n    var _a, _b;\n    if (wrapperRef.value && modalRef.value) {\n      const { top: wrapperTop, left: wrapperLeft } = wrapperRef.value.getBoundingClientRect();\n      const { clientWidth: wrapperWidth, clientHeight: wrapperHeight } = wrapperRef.value;\n      const { top, left, width, height } = modalRef.value.getBoundingClientRect();\n      const initialX = left - wrapperLeft;\n      const initialY = top - wrapperTop;\n      if (initialX !== ((_a = initialPosition.value) == null ? void 0 : _a[0]) || initialY !== ((_b = initialPosition.value) == null ? void 0 : _b[1])) {\n        initialPosition.value = [initialX, initialY];\n      }\n      const maxX = wrapperWidth > width ? wrapperWidth - width : 0;\n      const maxY = wrapperHeight > height ? wrapperHeight - height : 0;\n      if (maxX !== maxPosition.value[0] || maxY !== maxPosition.value[1]) {\n        maxPosition.value = [maxX, maxY];\n      }\n    }\n  };\n  const handleMoveDown = (ev) => {\n    if (draggable.value) {\n      ev.preventDefault();\n      isDragging.value = true;\n      getInitialPosition();\n      startMouse.value = [ev.x, ev.y];\n      diffMouse.value = [0, 0];\n      on(window, \"mousemove\", handleMouseMove);\n      on(window, \"mouseup\", handleMouseUp);\n      on(window, \"contextmenu\", handleMouseUp);\n    }\n  };\n  const handleMouseMove = (ev) => {\n    if (isDragging.value) {\n      const diffX = ev.x - startMouse.value[0];\n      const diffY = ev.y - startMouse.value[1];\n      let x = initialPosition.value[0] + diffX;\n      let y = initialPosition.value[1] + diffY;\n      if (x < 0)\n        x = 0;\n      if (x > maxPosition.value[0])\n        x = maxPosition.value[0];\n      if (y < 0)\n        y = 0;\n      if (y > maxPosition.value[1])\n        y = maxPosition.value[1];\n      position.value = [x, y];\n    }\n  };\n  const handleMouseUp = () => {\n    isDragging.value = false;\n    off(window, \"mousemove\", handleMouseMove);\n    off(window, \"mouseup\", handleMouseUp);\n  };\n  return {\n    position,\n    handleMoveDown\n  };\n};\nexport { useDraggable };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}