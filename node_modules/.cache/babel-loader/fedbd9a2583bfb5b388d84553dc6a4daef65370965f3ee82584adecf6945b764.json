{"ast":null,"code":"import { ref, computed, nextTick, watch } from \"vue\";\nimport { Enter } from \"../_utils/keycode.js\";\nvar useInput = function useInput(_ref) {\n  var defaultValue = _ref.defaultValue,\n    modelValue = _ref.modelValue,\n    emit = _ref.emit,\n    _ref$eventName = _ref.eventName,\n    eventName = _ref$eventName === void 0 ? \"input\" : _ref$eventName,\n    _ref$updateEventName = _ref.updateEventName,\n    updateEventName = _ref$updateEventName === void 0 ? \"update:modelValue\" : _ref$updateEventName,\n    eventHandlers = _ref.eventHandlers;\n  var _a;\n  var inputRef = ref();\n  var _value = ref((_a = defaultValue == null ? void 0 : defaultValue.value) != null ? _a : \"\");\n  var _focused = ref(false);\n  var isComposition = ref(false);\n  var compositionValue = ref(\"\");\n  var initialValue;\n  var computedValue = computed(function () {\n    var _a2;\n    return (_a2 = modelValue == null ? void 0 : modelValue.value) != null ? _a2 : _value.value;\n  });\n  var updateValue = function updateValue(value, ev) {\n    _value.value = value;\n    emit(updateEventName, value);\n    emit(eventName, value, ev);\n  };\n  var handleInput = function handleInput(ev) {\n    var value = ev.target.value;\n    if (!isComposition.value) {\n      updateValue(value, ev);\n      nextTick(function () {\n        if (inputRef.value && computedValue.value !== inputRef.value.value) {\n          inputRef.value.value = computedValue.value;\n        }\n      });\n    }\n  };\n  var handleChange = function handleChange(ev) {\n    if (eventName === \"input\" && computedValue.value !== initialValue) {\n      initialValue = computedValue.value;\n      emit(\"change\", computedValue.value, ev);\n    }\n  };\n  var handleComposition = function handleComposition(ev) {\n    var _a2;\n    var value = ev.target.value;\n    if (ev.type === \"compositionend\") {\n      isComposition.value = false;\n      compositionValue.value = \"\";\n      updateValue(value, ev);\n      nextTick(function () {\n        if (inputRef.value && computedValue.value !== inputRef.value.value) {\n          inputRef.value.value = computedValue.value;\n        }\n      });\n    } else {\n      isComposition.value = true;\n      compositionValue.value = computedValue.value + ((_a2 = ev.data) != null ? _a2 : \"\");\n    }\n  };\n  var handleFocus = function handleFocus(ev) {\n    var _a2, _b;\n    _focused.value = true;\n    initialValue = computedValue.value;\n    emit(\"focus\", ev);\n    (_b = (_a2 = eventHandlers == null ? void 0 : eventHandlers.value) == null ? void 0 : _a2.onFocus) == null ? void 0 : _b.call(_a2, ev);\n  };\n  var handleBlur = function handleBlur(ev) {\n    var _a2, _b;\n    _focused.value = false;\n    emit(\"blur\", ev);\n    (_b = (_a2 = eventHandlers == null ? void 0 : eventHandlers.value) == null ? void 0 : _a2.onBlur) == null ? void 0 : _b.call(_a2, ev);\n    handleChange(ev);\n  };\n  var handleKeyDown = function handleKeyDown(ev) {\n    var keyCode = ev.key || ev.code;\n    if (!isComposition.value && keyCode === Enter.key) {\n      emit(\"pressEnter\", ev);\n      handleChange(ev);\n    }\n  };\n  var handleMousedown = function handleMousedown(ev) {\n    if (inputRef.value && ev.target !== inputRef.value) {\n      ev.preventDefault();\n      inputRef.value.focus();\n    }\n  };\n  watch(computedValue, function (value) {\n    if (inputRef.value && value !== inputRef.value.value) {\n      inputRef.value.value = value;\n    }\n  });\n  return {\n    inputRef: inputRef,\n    _value: _value,\n    _focused: _focused,\n    isComposition: isComposition,\n    compositionValue: compositionValue,\n    computedValue: computedValue,\n    handleInput: handleInput,\n    handleComposition: handleComposition,\n    handleFocus: handleFocus,\n    handleBlur: handleBlur,\n    handleKeyDown: handleKeyDown,\n    handleMousedown: handleMousedown\n  };\n};\nexport { useInput };","map":{"version":3,"names":["ref","computed","nextTick","watch","Enter","useInput","_ref","defaultValue","modelValue","emit","_ref$eventName","eventName","_ref$updateEventName","updateEventName","eventHandlers","_a","inputRef","_value","value","_focused","isComposition","compositionValue","initialValue","computedValue","_a2","updateValue","ev","handleInput","target","handleChange","handleComposition","type","data","handleFocus","_b","onFocus","call","handleBlur","onBlur","handleKeyDown","keyCode","key","code","handleMousedown","preventDefault","focus"],"sources":["/root/FrontPlatform/vue-front/node_modules/@arco-design/web-vue/es/_hooks/use-input.js"],"sourcesContent":["import { ref, computed, nextTick, watch } from \"vue\";\nimport { Enter } from \"../_utils/keycode.js\";\nconst useInput = ({\n  defaultValue,\n  modelValue,\n  emit,\n  eventName = \"input\",\n  updateEventName = \"update:modelValue\",\n  eventHandlers\n}) => {\n  var _a;\n  const inputRef = ref();\n  const _value = ref((_a = defaultValue == null ? void 0 : defaultValue.value) != null ? _a : \"\");\n  const _focused = ref(false);\n  const isComposition = ref(false);\n  const compositionValue = ref(\"\");\n  let initialValue;\n  const computedValue = computed(() => {\n    var _a2;\n    return (_a2 = modelValue == null ? void 0 : modelValue.value) != null ? _a2 : _value.value;\n  });\n  const updateValue = (value, ev) => {\n    _value.value = value;\n    emit(updateEventName, value);\n    emit(eventName, value, ev);\n  };\n  const handleInput = (ev) => {\n    const { value } = ev.target;\n    if (!isComposition.value) {\n      updateValue(value, ev);\n      nextTick(() => {\n        if (inputRef.value && computedValue.value !== inputRef.value.value) {\n          inputRef.value.value = computedValue.value;\n        }\n      });\n    }\n  };\n  const handleChange = (ev) => {\n    if (eventName === \"input\" && computedValue.value !== initialValue) {\n      initialValue = computedValue.value;\n      emit(\"change\", computedValue.value, ev);\n    }\n  };\n  const handleComposition = (ev) => {\n    var _a2;\n    const { value } = ev.target;\n    if (ev.type === \"compositionend\") {\n      isComposition.value = false;\n      compositionValue.value = \"\";\n      updateValue(value, ev);\n      nextTick(() => {\n        if (inputRef.value && computedValue.value !== inputRef.value.value) {\n          inputRef.value.value = computedValue.value;\n        }\n      });\n    } else {\n      isComposition.value = true;\n      compositionValue.value = computedValue.value + ((_a2 = ev.data) != null ? _a2 : \"\");\n    }\n  };\n  const handleFocus = (ev) => {\n    var _a2, _b;\n    _focused.value = true;\n    initialValue = computedValue.value;\n    emit(\"focus\", ev);\n    (_b = (_a2 = eventHandlers == null ? void 0 : eventHandlers.value) == null ? void 0 : _a2.onFocus) == null ? void 0 : _b.call(_a2, ev);\n  };\n  const handleBlur = (ev) => {\n    var _a2, _b;\n    _focused.value = false;\n    emit(\"blur\", ev);\n    (_b = (_a2 = eventHandlers == null ? void 0 : eventHandlers.value) == null ? void 0 : _a2.onBlur) == null ? void 0 : _b.call(_a2, ev);\n    handleChange(ev);\n  };\n  const handleKeyDown = (ev) => {\n    const keyCode = ev.key || ev.code;\n    if (!isComposition.value && keyCode === Enter.key) {\n      emit(\"pressEnter\", ev);\n      handleChange(ev);\n    }\n  };\n  const handleMousedown = (ev) => {\n    if (inputRef.value && ev.target !== inputRef.value) {\n      ev.preventDefault();\n      inputRef.value.focus();\n    }\n  };\n  watch(computedValue, (value) => {\n    if (inputRef.value && value !== inputRef.value.value) {\n      inputRef.value.value = value;\n    }\n  });\n  return {\n    inputRef,\n    _value,\n    _focused,\n    isComposition,\n    compositionValue,\n    computedValue,\n    handleInput,\n    handleComposition,\n    handleFocus,\n    handleBlur,\n    handleKeyDown,\n    handleMousedown\n  };\n};\nexport { useInput };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}